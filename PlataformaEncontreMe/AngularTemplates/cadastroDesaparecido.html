<!--Chave API Google Maps: AIzaSyAHMgbkEvkhYWP0AQUuxpwXlP4y7PGB5oM -->

<div class="container" ng-controller="cadastroDesaparecidoController" style="margin-right: 0px !important; padding-right: 0px !important; padding-left: 180.156px !important; padding-top: 8% !important;">
    <div class="container">

        <h2 class="page-title">Cadastrar Pessoa Desaparecida</h2>


        <!-- Nova Pessoa Desaparecida-->
        <div class="row">
            <div class="col">
                <div class="panel panel-white">
                    <div class="panel-body">



                        <form novalidate name="formPessoa" role="form" class="ng-pristine ng-valid">
                            <div class="form-group col-sm-12">
                                <label for="formPessoa">Nome</label>
                                <input type="text" class="form-control" name="refNome" placeholder="Nome" maxlength="100" required autofocus />
                            </div>
                            <div class="form-group col-sm-5">
                                <label for="rg">RG</label>
                                <input type="text" class="form-control" name="rg" ng-model= "rg1"mask="99.999.999-9" placeholder="RG" maxlength="11" required />
                            </div>
                            <div class="form-group col-sm-5">
                                <label for="cpf">CPF</label>
                                <input type="text" class="form-control" nome="cpf"ng-model="cpf1" mask="999.999.999-99" placeholder="CPF" maxlength="14" required />
                            </div>
                            <div class="form-group col-sm-2">
                                <label class="control-label">Sexo</label>
                                <div class="form-group">
                                    <div class="selectContainer">
                                        <select class="form-control" name="sexo">
                                            <option value="">Escolha a opção</option>
                                            <option value="m">Masculino</option>
                                            <option value="f">Feminino</option>
                                        </select>
                                    </div>
                                </div>

                            </div>

                            <div class="form-group col-sm-6">
                                <label for="endereco">Endereço</label>
                                <input type="text" class="form-control" nome="endereco" placeholder="Endereço" maxlength="100" required />
                            </div>

                            <div class="form-group col-sm-2">
                                <label for="numero">Número</label>
                                <input type="text" class="form-control" nome="numero" placeholder="Número" maxlength="5" required />
                            </div>

                            <div class="form-group col-sm-4">
                                <label for="complemento">Complemento</label>
                                <input type="text" class="form-control" nome="complemento" placeholder="Complemento" maxlength="15" required />
                            </div>

                            <div class="form-group">
                                <label for="complemento">Local onde a pessoa foi vista pela última vez</label>
                            </div>



                            <input id="pac-input" class="controls form-group col-sm-6" type="text" placeholder="Pesquisar">
                            <div id="map" class="form-control" style="overflow: visible !important; margin:0; padding:0; height:500px;"></div>

                            <div class="form-group col-sm-12"></div>
                            <div class="center-div col-sm-3">
                                <button class="btn btn-primary" type="submit">Salvar</button>
                                <a href="#" class="btn btn-primary">Voltar</a>
                            </div>


                        </form>

                        <script src="https://maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyC3-G4GK4Y27lZzK4lzsWTZM7swOnByEMM&libraries=places&callback=initMap" async defer></script>
                        <script>
                            var map;
                            function initMap() {

                                var map = new google.maps.Map(document.getElementById('map'), {
                                    center: { lat: -23.223701, lng: -45.900907 },
                                    zoom: 15
                                });

                                var input = document.getElementById('pac-input');
                                var searchBox = new google.maps.places.SearchBox(input);
                                map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

                                map.addListener('bounds_changed', function () {
                                    searchBox.setBounds(map.getBounds());
                                });

                                var markers = [];

                                searchBox.addListener('places_changed', function () {
                                    var places = searchBox.getPlaces();

                                    if (places.length == 0) {
                                        return;
                                    }

                                    markers.forEach(function (marker) {
                                        marker.setMap(null);
                                    });
                                    markers = [];

                                    var bounds = new google.maps.LatLngBounds();
                                    places.forEach(function (place) {
                                        if (!place.geometry) {
                                            console.log("Returned place contains no geometry");
                                            return;
                                        }
                                        var icon = {
                                            url: place.icon,
                                            size: new google.maps.Size(71, 71),
                                            origin: new google.maps.Point(0, 0),
                                            anchor: new google.maps.Point(17, 34),
                                            scaledSize: new google.maps.Size(25, 25)
                                        };

                                        // Create a marker for each place.
                                        markers.push(new google.maps.Marker({
                                            map: map,
                                            icon: icon,
                                            title: place.name,
                                            position: place.geometry.location
                                        }));

                                        if (place.geometry.viewport) {
                                            // Only geocodes have viewport.
                                            bounds.union(place.geometry.viewport);
                                        } else {
                                            bounds.extend(place.geometry.location);
                                        }
                                    });
                                    map.fitBounds(bounds);
                                });

                                var marker = new google.maps.Marker({
                                    position: myLatlng,
                                    map: map,
                                    title: 'Click to zoom'
                                });

                                map.addListener('center_changed', function () {
                                    // 3 seconds after the center of the map has changed, pan back to the
                                    // marker.
                                    window.setTimeout(function () {
                                        map.panTo(marker.getPosition());
                                    }, 3000);
                                });

                                marker.addListener('click', function () {
                                    map.setZoom(8);
                                    map.setCenter(marker.getPosition());
                                });





                            }
                        </script>
                    </div>
                </div>
            </div>
        </div>



    </div>
</div>